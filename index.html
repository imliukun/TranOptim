<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TranOptim - 智能翻译与润色工具</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="main-content">
            <!-- 侧边栏 -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2>TranOptim</h2>
                    <div class="sidebar-actions">
                        <button class="new-chat-btn" id="newChatBtn">
                            <i class="bi bi-plus-lg"></i> 新对话
                        </button>
                        <button class="clear-chats-btn" id="clearChatsBtn">
                            <i class="bi bi-trash"></i> 清空
                        </button>
                    </div>
                </div>
                <div class="conversation-list" id="conversationList">
                    <!-- 对话列表将通过JavaScript动态生成 -->
                </div>
            </div>

            <!-- 聊天区域 -->
            <div class="chat-container">
                <div class="chat-header">
                    <div class="app-title">TranOptim 智能翻译与润色工具</div>
                    <div class="global-actions">
                        <!-- 已移除API密钥和网络代理按钮 -->
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <!-- 欢迎消息 -->
                    <div class="message system">
                        <div class="message-content">
                            <p>👋 欢迎使用 TranOptim 智能翻译与润色工具！</p>
                            <p>您可以直接输入文本进行翻译，或者上传图片进行图像文本翻译。</p>
                        </div>
                    </div>
                </div>

                <!-- 输入区域 -->
                <div class="chat-input-area">
                    <div class="input-wrapper">
                        <div class="input-container">
                            <div class="textarea-wrapper">
                                <textarea id="chatInput" class="chat-input" placeholder="输入文本或上传图片..." rows="1"></textarea>
                            </div>
                            <div class="buttons-wrapper">
                                <div class="action-buttons">
                                    <button class="btn upload-btn" id="uploadBtn">
                                        <i class="bi bi-image"></i> 图片
                                    </button>
                                    <input type="file" id="imageUpload" class="image-upload" accept="image/*">
                                    <button class="btn primary-btn" id="translateBtn">
                                        <i class="bi bi-translate"></i> 翻译
                                    </button>
                                    <button class="btn secondary-btn" id="polishBtn">
                                        <i class="bi bi-magic"></i> 润色
                                    </button>
                                </div>
                                <div class="settings-buttons">
                                    <button class="settings-btn" id="translateSettingsBtn">
                                        <i class="bi bi-gear"></i>
                                    </button>
                                    <button class="settings-btn" id="polishSettingsBtn">
                                        <i class="bi bi-sliders"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 翻译设置面板 -->
                <div class="settings-panel" id="translateSettings">
                    <h3>
                        翻译设置
                        <button class="close-settings-btn" id="closeTranslateSettings">
                            <i class="bi bi-x"></i>
                        </button>
                    </h3>
                    <div class="settings-group">
                        <span class="settings-label">翻译服务</span>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="gpt" name="translate-service" value="gpt" checked>
                                <label for="gpt">ChatGPT</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="gemini" name="translate-service" value="gemini">
                                <label for="gemini">Gemini</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="deepseek" name="translate-service" value="deepseek">
                                <label for="deepseek">DeepSeek</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="qwen" name="translate-service" value="qwen">
                                <label for="qwen">Qwen</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="doubao" name="translate-service" value="doubao">
                                <label for="doubao">豆包</label>
                            </div>
                        </div>
                    </div>
                    <div class="settings-group">
                        <span class="settings-label">源语言</span>
                        <select id="sourceLanguage">
                            <option value="auto">自动检测</option>
                            <option value="zh">中文</option>
                            <option value="en">英文</option>
                            <option value="ja">日文</option>
                            <option value="ko">韩文</option>
                            <option value="fr">法文</option>
                            <option value="de">德文</option>
                            <option value="es">西班牙文</option>
                            <option value="it">意大利文</option>
                            <option value="ru">俄文</option>
                        </select>
                    </div>
                    <div class="settings-group">
                        <span class="settings-label">目标语言</span>
                        <select id="targetLanguage">
                            <option value="zh">中文</option>
                            <option value="en">英文</option>
                            <option value="ja">日文</option>
                            <option value="ko">韩文</option>
                            <option value="fr">法文</option>
                            <option value="de">德文</option>
                            <option value="es">西班牙文</option>
                            <option value="it">意大利文</option>
                            <option value="ru">俄文</option>
                        </select>
                    </div>
                </div>

                <!-- 润色设置面板 -->
                <div class="settings-panel" id="polishSettings">
                    <h3>
                        润色设置
                        <button class="close-settings-btn" id="closePolishSettings">
                            <i class="bi bi-x"></i>
                        </button>
                    </h3>
                    <div class="settings-group">
                        <span class="settings-label">润色服务</span>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="polishGpt" name="polish-service" value="gpt" checked>
                                <label for="polishGpt">ChatGPT</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="polishGemini" name="polish-service" value="gemini">
                                <label for="polishGemini">Gemini</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="polishDeepseek" name="polish-service" value="deepseek">
                                <label for="polishDeepseek">DeepSeek</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="polishQwen" name="polish-service" value="qwen">
                                <label for="polishQwen">Qwen</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="polishDoubao" name="polish-service" value="doubao">
                                <label for="polishDoubao">豆包</label>
                            </div>
                        </div>
                    </div>
                    <div class="settings-group">
                        <span class="settings-label">润色风格</span>
                        <select id="polishStyle">
                            <option value="professional">专业正式</option>
                            <option value="simple">简洁明了</option>
                            <option value="creative">创意活泼</option>
                            <option value="academic">学术严谨</option>
                            <option value="normal">自然流畅</option>
                            <option value="rephrase">重新表述</option>
                        </select>
                    </div>
                    <div class="settings-group">
                        <span class="settings-label">润色方式</span>
                        <div class="polish-description">
                            <p>点击润色后，系统将自动生成两种风格的润色结果：</p>
                            <p><strong>1. 常规优化</strong>：润色语句使之更适合图书出版，通俗易懂，朗朗上口，符合中文表达习惯</p>
                            <p><strong>2. 转换语言风格</strong>：利用近义词、改变语句结构、改变主语、反译等方式重新表述</p>
                        </div>
                    </div>
                    <div class="settings-group">
                        <span class="settings-label">角色设定</span>
                        <div class="role-description">
                            <p>润色者将扮演图书作家的角色，专注于文本润色，不会额外添加文中没有的内容</p>
                        </div>
                    </div>
                    <div class="settings-group">
                        <span class="settings-label">语言</span>
                        <select id="polishLanguage">
                            <option value="zh">中文</option>
                            <option value="en">英文</option>
                            <option value="ja">日文</option>
                            <option value="ko">韩文</option>
                            <option value="fr">法文</option>
                            <option value="de">德文</option>
                            <option value="es">西班牙文</option>
                            <option value="it">意大利文</option>
                            <option value="ru">俄文</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 加载覆盖层 -->
    <div class="loading-overlay hidden" id="loadingOverlay">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">正在翻译中...</div>
        <div class="loading-timeout-hint" id="loadingTimeoutHint">
            如果加载时间过长，请<a href="javascript:void(0)" onclick="window.location.reload()">刷新页面</a>重试
        </div>
    </div>

    <!-- 通知组件 -->
    <div class="notification" id="notification"></div>

    <script src="js/app.js"></script>
    <script src="js/chat.js"></script>
</body>
</html>